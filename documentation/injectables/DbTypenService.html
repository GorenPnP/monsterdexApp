<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Monsterdex</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Monsterdex</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Eingeben zur Suche"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>DbTypenService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>Datei</h3>
        </p>
        <p class="comment">
            <code>src/app/services/db-typen.service.ts</code>
        </p>

            <p class="comment">
                <h3>Beschreibung</h3>
            </p>
            <p class="comment">
                <p>service for all functionalities concerning typs</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#allTypen">allTypen</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#db">db</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dbReady">dbReady</a>
                            </li>
                            <li>
                                <a href="#NUM_TYPEN">NUM_TYPEN</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methoden</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#dataToTyp">dataToTyp</a>
                            </li>
                            <li>
                                <a href="#defaultTyp">defaultTyp</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAllTypen">getAllTypen</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAttackeTypen">getAttackeTypen</a>
                            </li>
                            <li>
                                <a href="#getDatabaseState">getDatabaseState</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getEfficiency">getEfficiency</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getMonsterTypen">getMonsterTypen</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getTyp">getTyp</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getTypen">getTypen</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#getTypenByIds">getTypenByIds</a>
                            </li>
                            <li>
                                <a href="#observeTyp">observeTyp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateTypen">updateTypen</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Konstruktor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(databaseService: <a href="../injectables/DatabaseService.html">DatabaseService</a>, messageService: <a href="../injectables/MessageService.html">MessageService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Definiert in <a href="" data-line="35" class="link-to-prism">src/app/services/db-typen.service.ts:35</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>init db service</p>
</div>
                            <div>
                                    <b>Parameter :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Beschreibung</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>databaseService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DatabaseService.html" target="_self" >DatabaseService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            Nein
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>main db service to retrieve the db</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>messageService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/MessageService.html" target="_self" >MessageService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            Nein
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>to communicate to the user</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methoden
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dataToTyp"></a>
                    <span class="name">
                        <b>
                            dataToTyp
                        </b>
                        <a href="#dataToTyp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dataToTyp(data)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="264"
                            class="link-to-prism">src/app/services/db-typen.service.ts:264</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>convert db data result from select query with typs to list of typ instances</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>db data</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Typ[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise&lt;Typ[]&gt;</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="defaultTyp"></a>
                    <span class="name">
                        <b>
                            defaultTyp
                        </b>
                        <a href="#defaultTyp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>defaultTyp()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="282"
                            class="link-to-prism">src/app/services/db-typen.service.ts:282</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get dummy typ</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Typ</a></code>

                    </div>
                    <div class="io-description">
                        <p>Typ</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllTypen"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getAllTypen
                        </b>
                        <a href="#getAllTypen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllTypen()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="116"
                            class="link-to-prism">src/app/services/db-typen.service.ts:116</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>returns a list of all typs</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise<Typ></p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAttackeTypen"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getAttackeTypen
                        </b>
                        <a href="#getAttackeTypen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAttackeTypen(attId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="242"
                            class="link-to-prism">src/app/services/db-typen.service.ts:242</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get typen to an attack&#39;s id</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>attId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>id of an attack instance</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise&lt;Typ[]&gt;</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDatabaseState"></a>
                    <span class="name">
                        <b>
                            getDatabaseState
                        </b>
                        <a href="#getDatabaseState"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDatabaseState()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="87"
                            class="link-to-prism">src/app/services/db-typen.service.ts:87</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>communicate if this service is done initializing</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Observable<boolean></p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEfficiency"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getEfficiency
                        </b>
                        <a href="#getEfficiency"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getEfficiency(fromIds: number[], toIds: number[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="294"
                            class="link-to-prism">src/app/services/db-typen.service.ts:294</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get efficiency of hypothetical attack with typs of fromIds to hypothetical monster with typs of toIds</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>fromIds</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>[description]</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>toIds</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>[description]</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;number&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Promise<number> (INT, not FLOAT; 0 ^= wirkungslos, &gt;1 ^= sehr effektiv, &lt;0 ^= nicht sehr effektiv)</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMonsterTypen"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getMonsterTypen
                        </b>
                        <a href="#getMonsterTypen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMonsterTypen(monId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="220"
                            class="link-to-prism">src/app/services/db-typen.service.ts:220</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get typen to a monster&#39;s id</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>monId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>id of a monster</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise&lt;Typ[]&gt;</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTyp"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getTyp
                        </b>
                        <a href="#getTyp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTyp(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="196"
                            class="link-to-prism">src/app/services/db-typen.service.ts:196</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>public wrapper around getTypenByIds() for retrieving one typ</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>id of the searched typ</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise<Typ></p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTypen"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getTypen
                        </b>
                        <a href="#getTypen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTypen(neededIds: number[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="211"
                            class="link-to-prism">src/app/services/db-typen.service.ts:211</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>public wrapper around getMonstersByIds()</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>neededIds</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <p>needed ids of required typs</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Promise&lt;Typ[]&gt;</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTypenByIds"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                            getTypenByIds
                        </b>
                        <a href="#getTypenByIds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTypenByIds(neededIds: number[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="132"
                            class="link-to-prism">src/app/services/db-typen.service.ts:132</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>only function to read Typ entries from the db</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Beschreibung</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>neededIds</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                    <td>
                                        <ul>
<li>look for Typen with folliwing IDs</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Promise&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <ul>
<li>the Typen found</li>
</ul>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="observeTyp"></a>
                    <span class="name">
                        <b>
                            observeTyp
                        </b>
                        <a href="#observeTyp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>observeTyp()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="95"
                            class="link-to-prism">src/app/services/db-typen.service.ts:95</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get all newly loaded typs from here</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Typ.html" target="_self" >Observable&lt;Typ[]&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Observable&lt;Typ[]&gt;</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateTypen"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            updateTypen
                        </b>
                        <a href="#updateTypen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateTypen(typs: <a href="../interfaces/Typ.html">Typ[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Definiert in <a href="" data-line="103"
                            class="link-to-prism">src/app/services/db-typen.service.ts:103</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>add input list of typs to this.typen, access changes through ovservable</p>
</div>

                    <div class="io-description">
                        <b>Parameter :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>typs</td>
                                    <td>
                                                <code><a href="../interfaces/Typ.html" target="_self" >Typ[]</a></code>
                                    </td>

                                    <td>
                                        Nein
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="allTypen"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            allTypen</b>
                            <a href="#allTypen"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject([])</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Definiert in <a href="" data-line="35" class="link-to-prism">src/app/services/db-typen.service.ts:35</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>stores all typ instances loaded sometime while the app is opened.
minimizes database access</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="db"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            db</b>
                            <a href="#db"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>SQLiteObject</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Definiert in <a href="" data-line="21" class="link-to-prism">src/app/services/db-typen.service.ts:21</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>represents the actual database</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="dbReady"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            dbReady</b>
                            <a href="#dbReady"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>BehaviorSubject&lt;boolean&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject(false)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Definiert in <a href="" data-line="25" class="link-to-prism">src/app/services/db-typen.service.ts:25</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>signal if this service is done initializing</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="NUM_TYPEN"></a>
                        <span class="name">
                            <b>
                            NUM_TYPEN</b>
                            <a href="#NUM_TYPEN"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Definiert in <a href="" data-line="30" class="link-to-prism">src/app/services/db-typen.service.ts:30</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>total amount of all monsters (also unloaded ones)</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;

import { DatabaseService } from &quot;./database.service&quot;;
import { MessageService } from &quot;./message.service&quot;
import { BehaviorSubject, Observable } from &#x27;rxjs&#x27;;
import { SQLiteObject } from &#x27;@ionic-native/sqlite/ngx&#x27;;

import { Typ, StrToTyp } from &quot;../interfaces/typ&quot;;

/**
 * service for all functionalities concerning typs
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class DbTypenService {

	/**
	 * represents the actual database
	 */
	private db: SQLiteObject;
	/**
	 * signal if this service is done initializing
	 */
	private dbReady: BehaviorSubject&lt;boolean&gt; &#x3D; new BehaviorSubject(false);

	/**
	 * total amount of all monsters (also unloaded ones)
	 */
	NUM_TYPEN: number &#x3D; 0;
	/**
	 * stores all typ instances loaded sometime while the app is opened.
	 * minimizes database access
	 */
	private allTypen &#x3D; new BehaviorSubject([]);

	/**
	 * init db service
	 * @param databaseService main db service to retrieve the db
	 * @param messageService  to communicate to the user
	 */
  constructor(private databaseService: DatabaseService,
							private messageService: MessageService) {

		this.databaseService.getDatabaseState().subscribe(rdy &#x3D;&gt; {
			if (rdy) {
				// get db from DatabaseService
				this.db &#x3D; this.databaseService.getDatabase();
				if (!this.db) {
					this.messageService.error(&quot;Die Datenbank fehlt&quot;, &quot;in INIT TYPEN DB: got no db: &quot;, JSON.stringify(this.db));
				}

				// get NUM_Typen
				this.db.executeSql(&quot;SELECT COUNT(*) AS num FROM monster_typ&quot;, []).then(data &#x3D;&gt; {
					if (!data || !data.rows.length) {
						this.messageService.error(&quot;Konnte Anzahl der Typen nicht ermitteln&quot;);
					}
					this.NUM_TYPEN &#x3D; data.rows.item(0).num;

					// init allTypen
					let i &#x3D; 0;
					let emptyList &#x3D; []
					while (i++ &lt; this.NUM_TYPEN) {emptyList.push(null);}
					this.allTypen.next(emptyList);

					// seed db and set this.dbReady to true
					this.dbReady.next(true);

				}).catch(err &#x3D;&gt; {
					this.messageService.error(&quot;Konnte Typen nicht finden&quot;, &quot;Could not initiate TypenService.&quot;, err);
					this.NUM_TYPEN &#x3D; 21;

					// init allTypen
					let i &#x3D; 0;
					let emptyList &#x3D; []
					while (i++ &lt; this.NUM_TYPEN) {emptyList.push(null);}
					this.allTypen.next(emptyList);
				});
			}
		});
	}

	/**
	 * communicate if this service is done initializing
	 * @return Observable&lt;boolean&gt;
	 */
	getDatabaseState(): Observable&lt;boolean&gt; {
		return this.dbReady.asObservable();
	}

	/**
	 * get all newly loaded typs from here
	 * @return Observable&lt;Typ[]&gt;
	 */
	observeTyp(): Observable&lt;Typ[]&gt; {
		return this.allTypen.asObservable();
	}

	/**
	 * add input list of typs to this.typen, access changes through ovservable
	 * @param mons - contains all Typen to be added
	 */
	private updateTypen(typs: Typ[]): void {
		// filter is not active, use allTypen and lastTyp
		let allTyps: Typ[] &#x3D; this.allTypen.getValue();
		for (let i &#x3D; 0; i &lt; typs.length; i++) {
			allTyps[typs[i].id-1] &#x3D; typs[i];
		}
		this.allTypen.next(allTyps);
	}

	/**
	 * returns a list of all typs
	 * @return Promise&lt;Typ&gt;
	 */
	async getAllTypen(): Promise&lt;Typ[]&gt; {

		// get all typen by id so they are stored in allTypen
		let ids: number[] &#x3D; [];
		for (let i &#x3D; 1; i &lt;&#x3D; this.NUM_TYPEN; i++) {ids.push(i);}
		await this.getTypenByIds(ids);

		// return them
		return this.allTypen.getValue();
	}

	/**
	 * only function to read Typ entries from the db
	 * @param  neededIds - look for Typen with folliwing IDs
	 * @return           - the Typen found
	 */
	private async getTypenByIds(neededIds: number[]): Promise&lt;Typ[]&gt; {
		// build query and values
		let query &#x3D; &#x60;SELECT * FROM monster_typ WHERE id IN (&#x60;;
		let values &#x3D; [];

		let prepopulatedTypes: Typ[] &#x3D; [];

		let allTypes &#x3D; this.allTypen.getValue().slice();

		let tempType;
		for (let i &#x3D; 0; i &lt; neededIds.length; i++) {
			// dont go over allTyp&#x27;s boundaries
			if (neededIds[i] &gt; this.NUM_TYPEN) {continue;}

			tempType &#x3D; allTypes[neededIds[i]-1];

			// if no information about Typ in this.allTypes, add to query
			if (tempType &#x3D;&#x3D;&#x3D; null || tempType.id &#x3D;&#x3D;&#x3D; 0) {
				query +&#x3D; &quot;?,&quot;;
				values.push(&#x60;${neededIds[i]}&#x60;);
			} else {
				prepopulatedTypes.push(tempType);
			}
		}

		// if all information already gathered, return it
		if (values.length &#x3D;&#x3D;&#x3D; 0) {return prepopulatedTypes;}

		// exchange last comma with closing paenthesis
		query &#x3D; query.slice(0, -1) + &quot;)&quot;;

		return this.db.executeSql(query, values).then(async data &#x3D;&gt; {
			let types &#x3D; this.dataToTyp(data);

			if (types &#x3D;&#x3D;&#x3D; null || types &#x3D;&#x3D;&#x3D; []) {
				this.messageService.error(&quot;Konnte Typ nicht finden&quot;, &quot;in getTypen: could not get Typen with ids &quot;, neededIds);
				return [];
			}

			// return rest prematurely, even though not all ids found (of course, if they do not exist!)
			if (neededIds[neededIds.length-1] &gt; this.NUM_TYPEN) {return types;}

			if (types.length !&#x3D; values.length) {
				this.messageService.alert(&quot;Nicht alle Typ gefunden&quot;, &quot;in GET Typ: could not get all Typ with ids: &quot;, values, &quot; found: &quot;, this.databaseService.listIds(types));
				return [];
			}

			// sole place to update
			this.updateTypen(types);

			// sort concatenated lists in place
			let returnList &#x3D; prepopulatedTypes.concat(types).sort(function(a, b) {return a.id &lt; b.id? -1 : 1;});
			return returnList;
		}).catch(err &#x3D;&gt; {
			this.messageService.error(&quot;Konnte Typen nicht laden&quot;, &quot;GET TYPEN BY IDS: DB query didnt work&quot;, err);
			return []
		});
  }

	/**
	 * public wrapper around getTypenByIds() for retrieving one typ
	 * @param  id id of the searched typ
	 * @return Promise&lt;Typ&gt;
	 */
	async getTyp(id: number): Promise&lt;Typ&gt; {
		return this.getTypenByIds([id]).then(typs &#x3D;&gt; {
			if (!(typs &amp;&amp; typs.length)) {
				this.messageService.error(&quot;Konnte Typ nicht finden&quot;, &quot;GET Typ: could not find Typ with id&quot;, id);
				return this.defaultTyp();
			}
			return typs[0];
		});
	}

	/**
	 * public wrapper around getMonstersByIds()
	 * @param  neededIds	needed ids of required typs
	 * @return Promise&lt;Typ[]&gt;
	 */
	async getTypen(neededIds: number[]): Promise&lt;Typ[]&gt; {
		return this.getTypenByIds(neededIds);
	}

	/**
	 * get typen to a monster&#x27;s id
	 * @param  monId id of a monster
	 * @return Promise&lt;Typ[]&gt;
	 */
	async getMonsterTypen(monId: number): Promise&lt;Typ[]&gt; {

		// lookup needed ids of typs
		return this.db.executeSql(&#x60;SELECT typ_id FROM monster_monster_typen WHERE monster_id&#x3D;?&#x60;, [&#x60;${monId}&#x60;]).then(data &#x3D;&gt; {

			// collect type ids
			let typIds: number[] &#x3D; [];
			for (let i &#x3D; 0; i &lt; data.rows.length; i++) {
				typIds.push(data.rows.item(i).typ_id);
			}
			// get typs from ids
			return this.getTypenByIds(typIds).then(typen &#x3D;&gt;  {
				return typen;
			});
		});
	}

	/**
	 * get typen to an attack&#x27;s id
	 * @param  attId id of an attack instance
	 * @return Promise&lt;Typ[]&gt;
	 */
	async getAttackeTypen(attId: number): Promise&lt;Typ[]&gt; {

		// lookup needed ids of typs
		return this.db.executeSql(&#x60;SELECT typ_id FROM monster_attacke_typen WHERE attacke_id&#x3D;?&#x60;, [&#x60;${attId}&#x60;]).then(data &#x3D;&gt; {

			// collect type ids
			let typIds: number[] &#x3D; [];
			for (let i &#x3D; 0; i &lt; data.rows.length; i++) {
				typIds.push(data.rows.item(i).typ_id);
			}
			// get typs from ids
			return this.getTypenByIds(typIds).then(typen &#x3D;&gt;  {
				return typen;
			});
		});
	}

	/**
	 * convert db data result from select query with typs to list of typ instances
	 * @param  data db data
	 * @return Promise&lt;Typ[]&gt;
	 */
	dataToTyp(data): Typ[] {
		let typen: Typ[] &#x3D; [];
		let item;
		let typClass: Typ;
		for (let i &#x3D; 0; i &lt; data.rows.length; i++) {
			item &#x3D; data.rows.item(i);
			typClass &#x3D; StrToTyp[item.titel];
			typClass.id &#x3D; item.id;

			typen.push(typClass);
		}
		return typen;
	}

	/**
	 * get dummy typ
	 * @return Typ
	 */
	defaultTyp(): Typ {
		let typClass: Typ;
		return typClass;
	}


	/**
	 * get efficiency of hypothetical attack with typs of fromIds to hypothetical monster with typs of toIds
	 * @param  fromIds [description]
	 * @param  toIds   [description]
	 * @return Promise&lt;number&gt; (INT, not FLOAT; 0 ^&#x3D; wirkungslos, &gt;1 ^&#x3D; sehr effektiv, &lt;0 ^&#x3D; nicht sehr effektiv)
	 */
	async getEfficiency(fromIds: number[], toIds: number[]): Promise&lt;number&gt; {

		// construct query from
		let query &#x3D; &quot;SELECT efficiency AS eff FROM monster_typ_efficiency WHERE from_typ_id IN (&quot;;
		for (let i &#x3D; 0; i &lt; fromIds.length; i++) {
			query +&#x3D; &quot;?,&quot;;
		}

		// construct query to
		query &#x3D; query.slice(0, query.length-1) + &quot;) AND to_typ_id IN (&quot;;
		for (let i &#x3D; 0; i &lt; toIds.length; i++) {
			query +&#x3D; &quot;?,&quot;;
		}

		query &#x3D; query.slice(0, query.length-1) + &quot;)&quot;;

		// find efficiencies
		return this.db.executeSql(query, fromIds.concat(toIds)).then(data &#x3D;&gt; {

			// factorize all
			let factor: number &#x3D; 1.0;
			let dummy: number;
			for (let i &#x3D; 0; i &lt; data.rows.length; i++) {
				dummy &#x3D; data.rows.item(i).eff;
				if (dummy &lt; 0.0) {
					return 0;
				}
				factor *&#x3D; dummy;
			}

			// round normally on normaly effective and up
			if (factor &gt;&#x3D; 1.0) {
				return Math.round(factor);
			}

			// less than normal effective
			// log2(factor), is an int and negative
			// example: 1/4 &#x3D;&gt; -2
			return Math.round(Math.log(factor) / Math.log(2));
		});
	}
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">Kein passendes Ergebnis "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DbTypenService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
